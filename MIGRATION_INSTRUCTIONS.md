# Инструкции по применению миграций

## Hero Stories Migration

Для применения миграции `hero_stories` выполните следующие шаги:

### Через Supabase Dashboard:

1. Откройте Supabase Dashboard
2. Перейдите в SQL Editor
3. Скопируйте содержимое файла `supabase/migrations/20250121_hero_stories.sql`
4. Вставьте в SQL Editor и выполните запрос

### Через Supabase CLI:

```bash
supabase db push
```

## Что добавляет эта миграция:

- Создает таблицу `hero_stories` для управления каруселью на главной странице
- Добавляет индексы для оптимизации запросов
- Настраивает Row Level Security (RLS)
- Создает политики доступа:
  - Публичный доступ на чтение активных историй
  - Полный доступ для администраторов
- Вставляет дефолтную историю при первом применении

## Структура таблицы hero_stories:

- `id` - UUID, первичный ключ
- `url` - TEXT, ссылка на изображение или видео
- `type` - TEXT, тип контента ('image' или 'video')
- `title` - TEXT (опционально), название истории
- `description` - TEXT (опционально), описание истории
- `order_index` - INTEGER, порядок отображения
- `is_active` - BOOLEAN, активна ли история
- `created_at` - TIMESTAMPTZ, дата создания
- `updated_at` - TIMESTAMPTZ, дата обновления

## Использование в админ панели:

После применения миграции:

1. Войдите в админ панель `/admin`
2. Выберите модуль "Hero Stories"
3. Добавьте, редактируйте или удаляйте истории для карусели
4. Изменения сразу отобразятся на главной странице
